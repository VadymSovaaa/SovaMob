<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SovaApp</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- –í–µ—Ä—Ö–Ω—è—è —à–∞–ø–∫–∞ -->
<header class="header">
  <div class="header-content">
    <img src="sova-logo.gif" alt="SovaApp" class="logo">
    <h1 class="app-title">SovaApp</h1>
  </div>
</header>

<!-- –õ–µ–Ω—Ç–∞ –ø–æ—Å—Ç–æ–≤ -->
<main class="feed" id="feed">
  <!-- –ü–æ—Å—Ç—ã –±—É–¥—É—Ç –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è —Å—é–¥–∞ -->
</main>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å–Ω–∏–∑—É -->
<nav class="bottom-nav">
  <div class="nav-btn" data-tab="home" title="–õ–µ–Ω—Ç–∞">
    <svg width="29" height="29" fill="none"><path d="..."/></svg>
  </div>
  <div class="nav-btn" data-tab="search" title="–ü–æ–∏—Å–∫">
    <svg width="29" height="29" fill="none"><path d="..."/></svg>
  </div>
  <button class="add-post-btn" onclick="openAddPost()">
    <svg width="36" height="36" fill="white"><path d="..."/></svg>
  </button>
  <div class="nav-btn" data-tab="chats" title="–ß–∞—Ç—ã">
    <svg width="29" height="29" fill="none"><path d="..."/></svg>
  </div>
  <div class="nav-btn" data-tab="profile" title="–ü—Ä–æ—Ñ–∏–ª—å">
    <svg width="29" height="29" fill="none"><path d="..."/></svg>
  </div>
</nav>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞ -->
<div class="modal-bg" id="modalAddPost" style="display: none;">
  <div class="modal-window">
    <div class="modal-title">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</div>
    <form id="addPostForm" autocomplete="off" onsubmit="addPost(event)">
      <div class="modal-fields">
        <input type="text" id="newPostUser" class="modal-input" placeholder="–í–∞—à–µ –∏–º—è" maxlength="30" required>
        <textarea id="newPostText" class="modal-textarea" placeholder="–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?" maxlength="450" required></textarea>
        <label class="modal-file-label">
          <input type="file" id="newPostImg" accept="image/*">
          <span id="fileText">–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É</span>
        </label>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn-modal cancel" onclick="closeAddPost()">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" class="btn-modal green">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
      </div>
    </form>
  </div>
</div>

<!-- –°–∫—Ä–∏–ø—Ç—ã -->
<script>
  const modalBg = document.getElementById('modalAddPost');

  function openAddPost() {
    modalBg.style.display = 'flex';
    setTimeout(() => {
      modalBg.classList.add('show');
    }, 10);
  }

  function closeAddPost() {
    modalBg.classList.remove('show');
    setTimeout(() => {
      modalBg.style.display = 'none';
    }, 200);
  }

  document.getElementById('newPostImg').onchange = function() {
    const file = this.files[0];
    if (file) {
      document.getElementById('fileText').textContent = file.name;
    }
  };

  function addPost(event) {
    event.preventDefault();
    const user = document.getElementById('newPostUser').value.trim();
    const text = document.getElementById('newPostText').value.trim();
    const imgFile = document.getElementById('newPostImg').files[0];
    const feed = document.getElementById('feed');

    let newPost = document.createElement('div');
    newPost.className = 'post';
    newPost.innerHTML = `
      <div class="post-header">
        <div class="post-avatar">${user[0].toUpperCase()}</div>
        <div class="post-info">
          <div class="post-user">${user}</div>
          <div class="post-time">–¢–æ–ª—å–∫–æ —á—Ç–æ</div>
        </div>
      </div>
      <div class="post-text">${text}</div>
      ${imgFile ? `<img class="post-img" src="${URL.createObjectURL(imgFile)}" alt="Post image">` : ''}
      <div class="post-actions">
        <button class="like-btn">‚ù§Ô∏è Like</button>
        <button class="comment-btn">üí¨ Comment</button>
      </div>
    `;
    feed.prepend(newPost);
    closeAddPost();
    document.getElementById('addPostForm').reset();
    document.getElementById('fileText').textContent = '–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É';
  }
</script>

</body>
</html>